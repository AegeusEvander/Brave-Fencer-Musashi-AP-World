from typing import Dict, NamedTuple, Set, Optional, List, ClassVar

MAIN_RAM: str = "MainRAM"

bakery_locations: List[int] = [
    0x2015, #Chapter 2
    0x2056, #Chapter 3
    0x207b, #Chapter 4
    0x2098  #Chapter 5 and 6
]

restaurant_locations: List[int] = [
    0x201a, #Chapter 2
    0x2080, #Chapter 4
    0x209d  #Chapter 5 and 6
]

grocery_locations: List[int] = [
    0x2016, #Chapter 2
    0x2057, #Chapter 3
    0x207c, #Chapter 4
    0x2099  #Chapter 5 and 6
]

toy_shop_locations: List[int] = [
    0x2013, #Chapter 2
    0x2055, #Chapter 3
    0x207a, #Chapter 4
    0x2097  #Chapter 5 and 6
]

class StoreData(NamedTuple):
    inventory_id: int
    inventory_pointer_upper_pointer: int
    inventory_pointer_upper: List[int]
    inventory_pointer_lower_pointer: int
    inventory_pointer_lower: List[int]
    inventory_length_id: int
    inventory_length_id_expanded: Optional[int] = None

store_table: Dict[int, StoreData] = {
    0x2015: StoreData(0x1fab10, 0x189ab4, [0x20, 0x80], 0x189ab8, [0x10, 0xab], 0x189aa0, inventory_length_id_expanded = 0x189ab0), #Bakery chapter 2
    0x2056: StoreData(0x1fab10, 0x18671c, [0x20, 0x80], 0x186720, [0x10, 0xab], 0x186718, inventory_length_id_expanded = 0x186708), #Bakery chapter 3
    0x207b: StoreData(0x1fab10, 0x186ff4, [0x20, 0x80], 0x186ff8, [0x10, 0xab], 0x186fe0, inventory_length_id_expanded = 0x186ff0), #Bakery chapter 4
    0x2098: StoreData(0x1fab10, 0x186cf4, [0x20, 0x80], 0x186cf8, [0x10, 0xab], 0x186cf0, inventory_length_id_expanded = 0x186ce0), #Bakery chapter 5, 6
    0x201a: StoreData(0x1c16bc, 0x189ad8, [0x20, 0x80], 0x189adc, [0x10, 0xab], 0x1c160a), #Restaurant chapter 2
    0x2080: StoreData(0x1b92dc, 0x187018, [0x20, 0x80], 0x18701c, [0x10, 0xab], 0x1b922a), #Restaurant chapter 4
    0x209d: StoreData(0x1b9298, 0x186d18, [0x20, 0x80], 0x186d1c, [0x10, 0xab], 0x1b91e6), #Restaurant chapter 5, 6
    #0x2016: StoreData(0x1c1660, 0x1c168c, [0x60, 0x16, 0x1c, 0x80]*8, 0x0, [], 0x1c16ac), #Grocery chapter 2
    #0x2057: StoreData(0x1bc9c8, 0x1bc9f4, [0xc8, 0xc9, 0x1b, 0x80]*8, 0x0, [], 0x1bca14), #Grocery chapter 3
    #0x207c: StoreData(0x1b9280, 0x1b92ac, [0x80, 0x92, 0x1b, 0x80]*8, 0x0, [], 0x1b92cc), #Grocery chapter 4
    #0x2099: StoreData(0x1b923c, 0x1b9268, [0x3c, 0x92, 0x1b, 0x80]*8, 0x0, [], 0x1b9288), #Grocery chapter 5, 6
    0x2016: StoreData(0x1fab10, 0x1c168c, [0x10, 0xab, 0x1f, 0x80]*8, 0x0, [], 0x1c16ac), #Grocery chapter 2
    0x2057: StoreData(0x1fab10, 0x1bc9f4, [0x10, 0xab, 0x1f, 0x80]*8, 0x0, [], 0x1bca14), #Grocery chapter 3
    0x207c: StoreData(0x1fab10, 0x1b92ac, [0x10, 0xab, 0x1f, 0x80]*8, 0x0, [], 0x1b92cc), #Grocery chapter 4
    0x2099: StoreData(0x1fab10, 0x1b9268, [0x10, 0xab, 0x1f, 0x80]*8, 0x0, [], 0x1b9288), #Grocery chapter 5, 6
}

restaurant_pointers: Dict[int, Dict[int, List[int]]] = {
    0x201a: {0x40: [0xec, 0x17, 0x11, 0x80],
    0x71: [0x9c, 0x0b, 0x1f, 0x80], 
    0x72: [0xd4, 0x0b, 0x1f, 0x80], 
    0x73: [0x04, 0x0c, 0x1f, 0x80], 
    0x74: [0x1c, 0x0c, 0x1f, 0x80], 
    0x75: [0x3c, 0x0c, 0x1f, 0x80],
    0x76: [0x70, 0x0c, 0x1f, 0x80],
    0x77: [0xa0, 0x0c, 0x1f, 0x80],}, #Restaurant chapter 2
    0x2080: {0x40: [0xec, 0x17, 0x11, 0x80],
    0x71: [0x90, 0x91, 0x1e, 0x80], 
    0x72: [0xc8, 0x91, 0x1e, 0x80], 
    0x73: [0xf8, 0x91, 0x1e, 0x80], 
    0x74: [0x10, 0x92, 0x1e, 0x80], 
    0x75: [0x30, 0x92, 0x1e, 0x80],
    0x76: [0x64, 0x92, 0x1e, 0x80],
    0x77: [0x94, 0x92, 0x1e, 0x80],},#Restaurant chapter 4
    0x209d: {0x40: [0xec, 0x17, 0x11, 0x80],
    0x71: [0x18, 0xf0, 0x1e, 0x80], 
    0x72: [0x50, 0xf0, 0x1e, 0x80], 
    0x73: [0x80, 0xf0, 0x1e, 0x80], 
    0x74: [0x98, 0xf0, 0x1e, 0x80], 
    0x75: [0xb8, 0xf0, 0x1e, 0x80],
    0x76: [0xec, 0xf0, 0x1e, 0x80],
    0x77: [0x1c, 0xf1, 0x1e, 0x80],},#Restaurant chapter 5, 6
}

restaurant_pointers_pointers: Dict[int, int] = {
    0x201a: 0x1c17b4, #Restaurant chapter 2
    0x2080: 0x1b93d4, #Restaurant chapter 4
    0x209d: 0x1b9390, #Restaurant chapter 5, 6
}

toy_shop_fix: Dict[int, int] = {
    0x2013: 0x18c19c,
    0x2055: 0x188e04,
    0x207a: 0x1896dc,
    0x2097: 0x1893dc
}

toy_shop_dialog: Dict[int, List[int]] = {
    0x2013: [ #Chapter 2 toy shop
        0x1f0760,
        0x1f07b8,
        0x1f07ec,
        0x1f0830,
        0x1f0878,
        0x1f089c,
        0x1f08dc,
        0x1f0920,
        0x1f0960,
        0x1f099c,
        0x1f09dc,
        0x1f0a24,
        0x1f0a6c,
        0x1f0a9c,
        0x1f0ae8,
        0x1f0b1c,
        0x1f0b54,
        0x1f0ba0,
        0x1f0bcc,
        0x1f0c04,
        0x1f0c34,
        0x1f0c70,
        0x1f0cb4,
        0x1f0d04,
        0x1f0d44,
        0x1f0d68,
        0x1f0dac,
        0x1f0dec,
        0x1f0e24,
        0x1f0e5c,
        0x1f0ea4,
        0x1f0eec,
        0x1f0f2c,
        0x1f0f6c,
        0x1f0fac,
        0x1f0fd8,
        0x1f1018,
        0x1f104c,
        0x1f108c,
        0x1f10bc,
        0x1f1108,
        0x1f1144,
        0x1f117c
    ],
    0x2055: [ #Chapter 3 toy shop
        0x1e37e4,
        0x1e383c,
        0x1e3870,
        0x1e38b4,
        0x1e38fc,
        0x1e3920,
        0x1e3960,
        0x1e39a4,
        0x1e39e4,
        0x1e3a20,
        0x1e3a60,
        0x1e3aa8,
        0x1e3af0,
        0x1e3b20,
        0x1e3b6c,
        0x1e3ba0,
        0x1e3bd8,
        0x1e3c24,
        0x1e3c50,
        0x1e3c88,
        0x1e3cb8,
        0x1e3cf4,
        0x1e3d38,
        0x1e3d88,
        0x1e3dc8,
        0x1e3dec,
        0x1e3e30,
        0x1e3e70,
        0x1e3ea8,
        0x1e3ee0,
        0x1e3f28,
        0x1e3f70,
        0x1e3fb0,
        0x1e3ff0,
        0x1e4030,
        0x1e405c,
        0x1e409c,
        0x1e40d0,
        0x1e4110,
        0x1e4140,
        0x1e418c,
        0x1e41c8,
        0x1e4200
    ],
    0x207a: [ #Chapter 4 toy shop
        0x1e8d4c,
        0x1e8da4,
        0x1e8dd8,
        0x1e8e1c,
        0x1e8e64,
        0x1e8e88,
        0x1e8ec8,
        0x1e8f0c,
        0x1e8f4c,
        0x1e8f88,
        0x1e8fc8,
        0x1e9010,
        0x1e9058,
        0x1e9088,
        0x1e90d4,
        0x1e9108,
        0x1e9140,
        0x1e918c,
        0x1e91b8,
        0x1e91f0,
        0x1e9220,
        0x1e925c,
        0x1e92a0,
        0x1e92f0,
        0x1e9330,
        0x1e9354,
        0x1e9398,
        0x1e93d8,
        0x1e9410,
        0x1e9448,
        0x1e9490,
        0x1e94d8,
        0x1e9518,
        0x1e9558,
        0x1e9598,
        0x1e95c4,
        0x1e9604,
        0x1e9638,
        0x1e9678,
        0x1e96a8,
        0x1e96f4,
        0x1e9730,
        0x1e9768
    ],
    0x2097: [ #Chapter 5 toy shop
        0x1eebdc,
        0x1eec34,
        0x1eec68,
        0x1eecac,
        0x1eecf4,
        0x1eed18,
        0x1eed58,
        0x1eed9c,
        0x1eeddc,
        0x1eee18,
        0x1eee58,
        0x1eeea0,
        0x1eeee8,
        0x1eef18,
        0x1eef64,
        0x1eef98,
        0x1eefd0,
        0x1ef01c,
        0x1ef048,
        0x1ef080,
        0x1ef0b0,
        0x1ef0ec,
        0x1ef130,
        0x1ef180,
        0x1ef1c0,
        0x1ef1e4,
        0x1ef228,
        0x1ef268,
        0x1ef2a0,
        0x1ef2d8,
        0x1ef320,
        0x1ef368,
        0x1ef3a8,
        0x1ef3e8,
        0x1ef428,
        0x1ef454,
        0x1ef494,
        0x1ef4c8,
        0x1ef508,
        0x1ef538,
        0x1ef584,
        0x1ef5c0,
        0x1ef5f8
    ]
}

toy_shop_dialog_length: List[int] = [
    88,
    52,
    68,
    72,
    36,
    64,
    68,
    64,
    60,
    64,
    72,
    72,
    48,
    76,
    52,
    56,
    76,
    44,
    56,
    48,
    60,
    68,
    80,
    64,
    36,
    68,
    64,
    56,
    56,
    72,
    72,
    64,
    64,
    64,
    44,
    64,
    52,
    64,
    48,
    76,
    60,
    56,
    56
]

tech_fix=[
    (0x1818d0, [0x84], MAIN_RAM),
    (0x18073c, [0x84], MAIN_RAM),
    (0x180674, [0x84], MAIN_RAM),
    (0x180998, [0x84], MAIN_RAM),
    (0x181080, [0x84], MAIN_RAM),
    (0x1810ec, [0x84], MAIN_RAM),
    (0x181314, [0x84], MAIN_RAM)
]

tech_check_locations=[
    (0x0ba20c, 1, MAIN_RAM), #Artisan
    (0x0ba1fb, 1, MAIN_RAM), #Maid
    (0x0ba1f5, 1, MAIN_RAM), #Clown
    (0x0ba200, 1, MAIN_RAM), #KnightB
    (0x0ba207, 1, MAIN_RAM), #KnightA
    (0x0ba216, 1, MAIN_RAM), #KnightC
    (0x0ba218, 1, MAIN_RAM)  #KnightD
]